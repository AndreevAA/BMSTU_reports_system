time="2022-10-23T23:46:21+03:00" level=info msg="Reading application config" func="config.go:45" file="reports_system/internal/session.GetConfig.func1()"
time="2022-10-23T23:46:21+03:00" level=fatal msg="dial tcp: lookup reports_system-postgres: no such host" func="main.go:41" file="main.main()"
time="2022-10-23T23:47:09+03:00" level=info msg="Reading application config" func="config.go:45" file="reports_system/internal/session.GetConfig.func1()"
time="2022-10-23T23:47:09+03:00" level=fatal msg="dial tcp: lookup reports_system-postgres: no such host" func="main.go:41" file="main.main()"
time="2022-10-23T23:48:27+03:00" level=info msg="Reading application config" func="config.go:45" file="reports_system/internal/session.GetConfig.func1()"
time="2022-10-23T23:48:27+03:00" level=info msg=etc/migrationsreports_system func="connect.go:52" file="reports_system/pkg/client/psqlclient.runMigrations()"
time="2022-10-23T23:48:27+03:00" level=fatal msg="migration failed: relation \"users\" already exists in line 0: CREATE TABLE users (\n    id SERIAL NOT NULL UNIQUE,\n    name VARCHAR(255) NOT NULL,\n    username VARCHAR(255) NOT NULL UNIQUE,\n    email VARCHAR(255) NOT NULL,\n    password_hash VARCHAR(255) NOT NULL\n);\n\nCREATE TABLE reports (\n    id SERIAL NOT NULL UNIQUE,\n    header VARCHAR(255) NOT NULL,\n    short_body VARCHAR(255),\n    department VARCHAR(6) NOT NULL,\n    edited TIMESTAMP WITH TIME ZONE\n);\n\nCREATE TABLE reports_body (\n    id INT REFERENCES reports(id) ON DELETE CASCADE NOT NULL,\n    body TEXT\n);\n\nCREATE TABLE users_reports (\n    id SERIAL NOT NULL UNIQUE,\n    users_id INT REFERENCES users(id) ON DELETE CASCADE NOT NULL,\n    reports_id INT REFERENCES reports(id) ON DELETE CASCADE NOT NULL\n);\n\nCREATE TABLE labels (\n    id SERIAL NOT NULL UNIQUE,\n    name VARCHAR(255) NOT NULL,\n    department VARCHAR(6) NOT NULL\n);\n\nCREATE TABLE labels_reports (\n    id SERIAL NOT NULL UNIQUE,\n    labels_id INT REFERENCES labels(id) ON DELETE CASCADE NOT NULL,\n    reports_id INT REFERENCES reports(id) ON DELETE CASCADE NOT NULL\n);\n\nCREATE TABLE users_labels (\n    id SERIAL NOT NULL UNIQUE,\n    users_id INT REFERENCES users(id) ON DELETE CASCADE NOT NULL,\n    labels_id INT REFERENCES labels(id) ON DELETE CASCADE NOT NULL\n); (details: pq: relation \"users\" already exists)" func="main.go:41" file="main.main()"
time="2022-10-23T23:48:56+03:00" level=info msg="Reading application config" func="config.go:45" file="reports_system/internal/session.GetConfig.func1()"
time="2022-10-23T23:48:56+03:00" level=info msg=etc/migrationsreports_system func="connect.go:52" file="reports_system/pkg/client/psqlclient.runMigrations()"
time="2022-10-23T23:48:56+03:00" level=fatal msg="Dirty database version 151022. Fix and force version." func="main.go:41" file="main.main()"
time="2022-10-23T23:49:06+03:00" level=info msg="Reading application config" func="config.go:45" file="reports_system/internal/session.GetConfig.func1()"
time="2022-10-23T23:49:06+03:00" level=info msg="Create new gin router" func="main.go:44" file="main.main()"
time="2022-10-23T23:49:06+03:00" level=info msg="initializing repository" func="main.go:49" file="main.main()"
time="2022-10-23T23:49:06+03:00" level=info msg="initializing services" func="main.go:52" file="main.main()"
time="2022-10-23T23:49:06+03:00" level=trace msg="Register route: /api/v1/accounts" func="handler.go:38" file="reports_system/internal/handlers/account.(*Handler).Register()"
time="2022-10-23T23:49:06+03:00" level=trace msg="Register route: /api/v1/reports" func="handler.go:42" file="reports_system/internal/handlers/report.(*Handler).Register()"
time="2022-10-23T23:49:06+03:00" level=trace msg="Register route: /api/v1/labels" func="handler.go:40" file="reports_system/internal/handlers/label.(*Handler).Register()"
time="2022-10-23T23:49:06+03:00" level=trace msg="Register route: /api/v1/reports/:id/labels" func="handler.go:41" file="reports_system/internal/handlers/label.(*Handler).Register()"
time="2022-10-23T23:49:06+03:00" level=trace msg="Register route: /api/v1/reports/:id/labels" func="handler.go:51" file="reports_system/internal/handlers/label.(*Handler).Register()"
time="2022-10-23T23:49:06+03:00" level=info msg="trying to listen to localhost:8080" func="server.go:32" file="reports_system/cmd/server.Run()"
time="2022-10-23T23:49:06+03:00" level=info msg="application initialized and started" func="server.go:41" file="reports_system/cmd/server.Run()"
time="2022-10-23T23:52:14+03:00" level=info msg="Account password hashed" func="account.go:23" file="reports_system/internal/mapper/account.(*mapper).MapRegisterAccountDTO()"
time="2022-10-23T23:52:15+03:00" level=info msg="Creating accounts" func="auth.go:35" file="reports_system/internal/repository/psql.(*AuthPostgres).CreateAccount()"
time="2022-10-23T23:52:30+03:00" level=info msg="Get accounts 0 from db" func="auth.go:50" file="reports_system/internal/repository/psql.(*AuthPostgres).AuthorizeAccount()"
time="2022-10-23T23:52:30+03:00" level=info msg=1Alexanderandreev@ingry.tech func="service.go:32" file="reports_system/internal/service/account.(*Service).GenerateJWT()"
time="2022-10-23T23:52:45+03:00" level=info msg=authorized func="middleware.go:34" file="reports_system/internal/handlers/middleware.Authenticate()"
time="2022-10-23T23:53:05+03:00" level=info msg=authorized func="middleware.go:34" file="reports_system/internal/handlers/middleware.Authenticate()"
time="2022-10-23T23:56:47+03:00" level=info msg="Caught signal interrupt. Shutting down..." func="shutdown.go:16" file="reports_system/pkg/shutdown.Graceful()"
time="2022-10-23T23:56:47+03:00" level=warning msg="server shutdown" func="server.go:46" file="reports_system/cmd/server.Run()"
time="2022-10-23T23:59:12+03:00" level=info msg="Reading application config" func="config.go:45" file="reports_system/internal/session.GetConfig.func1()"
time="2022-10-23T23:59:12+03:00" level=info msg="Create new gin router" func="main.go:44" file="main.main()"
time="2022-10-23T23:59:12+03:00" level=info msg="initializing repository" func="main.go:49" file="main.main()"
time="2022-10-23T23:59:12+03:00" level=info msg="initializing services" func="main.go:52" file="main.main()"
time="2022-10-23T23:59:12+03:00" level=trace msg="Register route: /api/v1/accounts" func="handler.go:38" file="reports_system/internal/handlers/account.(*Handler).Register()"
time="2022-10-23T23:59:12+03:00" level=trace msg="Register route: /api/v1/reports" func="handler.go:42" file="reports_system/internal/handlers/report.(*Handler).Register()"
time="2022-10-23T23:59:12+03:00" level=trace msg="Register route: /api/v1/labels" func="handler.go:40" file="reports_system/internal/handlers/label.(*Handler).Register()"
time="2022-10-23T23:59:12+03:00" level=trace msg="Register route: /api/v1/reports/:id/labels" func="handler.go:41" file="reports_system/internal/handlers/label.(*Handler).Register()"
time="2022-10-23T23:59:12+03:00" level=trace msg="Register route: /api/v1/reports/:id/labels" func="handler.go:51" file="reports_system/internal/handlers/label.(*Handler).Register()"
time="2022-10-23T23:59:12+03:00" level=info msg="trying to listen to localhost:8080" func="server.go:32" file="reports_system/cmd/server.Run()"
time="2022-10-23T23:59:12+03:00" level=info msg="application initialized and started" func="server.go:41" file="reports_system/cmd/server.Run()"
time="2022-10-24T01:22:26+03:00" level=info msg="Caught signal interrupt. Shutting down..." func="shutdown.go:16" file="reports_system/pkg/shutdown.Graceful()"
time="2022-10-24T01:22:26+03:00" level=warning msg="server shutdown" func="server.go:46" file="reports_system/cmd/server.Run()"
time="2022-10-24T08:55:37+03:00" level=info msg="Reading application config" func="config.go:45" file="reports_system/internal/session.GetConfig.func1()"
time="2022-10-24T08:55:37+03:00" level=info msg="Create new gin router" func="main.go:44" file="main.main()"
time="2022-10-24T08:55:37+03:00" level=info msg="initializing repository" func="main.go:49" file="main.main()"
time="2022-10-24T08:55:37+03:00" level=info msg="initializing services" func="main.go:52" file="main.main()"
time="2022-10-24T08:55:37+03:00" level=trace msg="Register route: /api/v1/accounts" func="handler.go:38" file="reports_system/internal/handlers/account.(*Handler).Register()"
time="2022-10-24T08:55:37+03:00" level=trace msg="Register route: /api/v1/reports" func="handler.go:42" file="reports_system/internal/handlers/report.(*Handler).Register()"
time="2022-10-24T08:55:37+03:00" level=trace msg="Register route: /api/v1/labels" func="handler.go:40" file="reports_system/internal/handlers/label.(*Handler).Register()"
time="2022-10-24T08:55:37+03:00" level=trace msg="Register route: /api/v1/reports/:id/labels" func="handler.go:41" file="reports_system/internal/handlers/label.(*Handler).Register()"
time="2022-10-24T08:55:37+03:00" level=trace msg="Register route: /api/v1/reports/:id/labels" func="handler.go:51" file="reports_system/internal/handlers/label.(*Handler).Register()"
time="2022-10-24T08:55:37+03:00" level=info msg="trying to listen to localhost:8080" func="server.go:32" file="reports_system/cmd/server.Run()"
time="2022-10-24T08:55:37+03:00" level=info msg="application initialized and started" func="server.go:41" file="reports_system/cmd/server.Run()"
time="2022-10-24T08:55:45+03:00" level=info msg=authorized func="middleware.go:34" file="reports_system/internal/handlers/middleware.Authenticate()"
